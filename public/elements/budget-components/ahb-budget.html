<dom-module id="ahb-budget">
  <template>
    <budget-timeline></budget-timeline>
    <div id="root"></div>
    <budget-total></budget-total>
  </template>
</dom-module>

<script>
  Polymer({
    is : 'ahb-budget',

    properties : {
      example : {
        type : String
      }
    },

    attached : function() {
      this.demo();
    },

    demo : function() {
      var appData = FB.transform(FB.examples[this.example]);
      window.appData = appData;

      var options = {
        noEvent : true,
        noRecalc : true
      }

      appData.materials.forEach(function(material){
        FB.materialController.add(material, options);
      });

      FB.materialController.recalc();

      appData.operations.forEach(function(operation){
        FB.operationController.add(operation, options);
      });

      FB.operationController.recalc();

      appData.operations.forEach(function(operation){
        var ele = document.createElement('budget-operation');
        ele.operationid = operation.id;

        var div = document.createElement('div');
        div.appendChild(ele);

        this.$.root.appendChild(div);
      }.bind(this));

    }

  });
</script>
