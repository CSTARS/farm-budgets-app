<dom-module id="budget-material-advanced">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <h4 style="margin-bottom: 35px"><i class="fa fa-cog"></i> Advanced Material Settings</h4>

    <div class="form-horizontal" >
      <div class="form-group">
        <label for="nameInput" class="col-sm-3 control-label"><i class="fa fa-shield"></i> Authority</label>
        <div class="col-sm-9">
          <budget-authority-selector id="authority" on-authority-select="onAuthoritySelect"></budget-authority-selector>
        </div>
      </div>

      <div class="form-group">
        <label for="locationInput" class="col-sm-3 control-label"><i class="fa fa-map-marker"></i> Location</label>
        <div class="col-sm-9">
          <budget-location-selector id="locationInput"></budget-location-selector>
        </div>
      </div>

      <div class="form-group">
        <label for="sourceInput" class="col-sm-3 control-label"><i class="fa fa-book"></i> Source</label>
        <div class="col-sm-9">
          <budget-markdown-input id="sourceInput"></budget-markdown-input>
          <div class="help-block">Add any source (where the data came from) information for this material.
            <a href="https://help.github.com/articles/markdown-basics/" target="_blank">Markdown</a>
             is encouraged.  External links are encouraged.
          </div>
        </div>
      </div>

      <div class="form-group" id="classGroup">
        <label for="optionInput" class="col-sm-3 control-label">Class</label>
        <div class="col-sm-9">
          <budget-class-selector id="classInput"></budget-class-selector>
        </div>
      </div>
    </div>

    <a class="btn btn-link" on-click="back"><i class="fa fa-arrow-left"></i> Back</a>

  </template>
  <script>
    Polymer({
      is : 'budget-material-advanced',

      properties : {
        data : {
          type : Object,
          observer : 'dataObserver'
        }
      },

      dataObserver : function() {
        this.$.authority.value = this.data.authority;
        this.$.authority.default = this.data.authority;
        this.$.locationInput.value = this.data.locality || [];

        if( this.$.classInput.isClass(this.data.class || '') ) {
          this.$.classInput.setValue(this.data.class.toLowerCase());
        }
      },

      create : function() {
        this.$.classInput.setValue('other');
      },

      save : function() {
        if( !this.data ) return;
        this.data.class = this.$.classInput.getValue();
        this.data.locality = this.$.locationInput.value;
      },

      back : function() {
        this.fire('close-advanced');
      },

      onAuthoritySelect : function(e) {
        this.data.authority = e.detail;
      }
    });
  </script>
</dom-module>
