<link rel="import" href="../setup/budget-setup-authorities.html" />
<link rel="import" href="../setup/budget-setup-account.html" />
<link rel="import" href="../setup/budget-setup-my-budgets.html" />

<dom-module id="budget-section-setup">
  <style>
    :host {
      display: block;
      padding-top: 25px;
    }
    .card {
      padding: 15px;
      margin: 15px;
      box-shadow: 0 0 8px #ccc;
    }
    @media(max-width: 768px) {
      .card {
        padding: 5px;
        margin: 5px 0px;
      }
    }
  </style>
  <template>

    <div id="noAccess" style="text-align center">

      <div class="well">
        You must first <a class="btn btn-default btn-lg" href="/login.html">Login</a>
      </div>

    </div>

    <div class="row" id="hasAccess">
      <div class="col-sm-3">
        <ul class="list-group">
          <li class="list-group-item">
            <a href="#budget/setup/account">My Account</a>
          </li>
          <li class="list-group-item">
            <a href="#budget/setup/authorities">My Authorities</a>
          </li>
          <li class="list-group-item">
            <a href="#budget/setup/budgets">My Budgets</a>
          </li>
        </ul>
      </div>

      <div class="col-sm-9" id="panels" style="padding-right: 30px">
        <budget-setup-authorities id="authorities"></budget-setup-authorities>
        <budget-setup-account id="account"></budget-setup-account>
        <budget-setup-my-budgets id="budgets"></budget-setup-my-budgets>
      </div>
    </div>

  </template>
</dom-module>

<script>
  Polymer({
    is : 'budget-section-setup',

    onShow : function(params) {
      if( !ExpressAuth.user ) {
        this.$.noAccess.style.display = 'block';
        this.$.hasAccess.style.display = 'none';
        return;
      } else {
        this.$.noAccess.style.display = 'none';
        this.$.hasAccess.style.display = 'block';
      }

      if( params.length == 0 ) {
        return window.location = '#budget/setup/authorities';
      }

      var page = params[0];
      params.splice(0,1);

      if( !this.$[page] ) return;
      $(this.$.panels).children().hide();

      this.$[page].style.display = 'block';
      this.$[page].onShow(params);
    }
  });
</script>
